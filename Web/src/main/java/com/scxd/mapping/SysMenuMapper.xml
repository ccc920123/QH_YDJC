<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.scxd.dao.mapper.SysMenuMapper">
    <resultMap id="BaseResultMap" type="com.scxd.beans.pojo.SysMenu">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <result column="MENU_ID" property="menuId" jdbcType="INTEGER"/>
        <result column="PARENTID" property="parentid" jdbcType="INTEGER"/>
        <result column="NAVIGATEURL" property="navigateurl" jdbcType="VARCHAR"/>
        <result column="NAME" property="name" jdbcType="VARCHAR"/>
        <result column="MID" property="mid" jdbcType="INTEGER"/>
        <result column="SORTCODE" property="sortcode" jdbcType="INTEGER"/>
        <result column="STATE" property="state" jdbcType="INTEGER"/>
        <result column="TARGET" property="target" jdbcType="VARCHAR"/>
        <result column="ICO" property="ico" jdbcType="VARCHAR"/>
        <result column="LEVELNUM" property="levelnum" jdbcType="INTEGER"/>
        <result column="SFHXYW" property="sfhxyw" jdbcType="INTEGER"/>
        <result column="MENU_TYPE" property="menuType" jdbcType="INTEGER"/>
        <result column="SFSQCB" property="sfsqcb" jdbcType="INTEGER"/>
        <result column="SFXZJY" property="sfxzjy" jdbcType="INTEGER"/>
        <result column="QXID" property="qxid" jdbcType="INTEGER"/>
        <result column="TYPE" property="type" jdbcType="INTEGER"/>
    </resultMap>
    <insert id="insertSelective" parameterType="com.scxd.beans.pojo.SysMenu">
        insert into sys_menu
        <trim prefix="(" suffix=")" suffixOverrides=",">
                MENU_ID,
            <if test="parentid != null">
                PARENTID,
            </if>
            <if test="navigateurl != null">
                NAVIGATEURL,
            </if>
            <if test="name != null">
                NAME,
            </if>
            <if test="mid != null">
                MID,
            </if>
            <if test="sortcode != null">
                SORTCODE,
            </if>
            <if test="state != null">
                STATE,
            </if>
            <if test="target != null">
                TARGET,
            </if>
            <if test="ico != null">
                ICO,
            </if>
            <if test="levelnum != null">
                LEVELNUM,
            </if>
            <if test="sfhxyw != null">
                SFHXYW,
            </if>
            <if test="menuType != null">
                MENU_TYPE,
            </if>
            <if test="sfsqcb != null">
                SFSQCB,
            </if>
            <if test="sfxzjy != null">
                SFXZJY,
            </if>
            <if test="qxid != null">
                QXID,
            </if>
            <if test="type != null">
                TYPE ,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
                SEQ_SYS_MENU.NEXTVAL,
            <if test="parentid != null">
                #{parentid,jdbcType=INTEGER},
            </if>
            <if test="navigateurl != null">
                #{navigateurl,jdbcType=VARCHAR},
            </if>
            <if test="name != null">
                #{name,jdbcType=VARCHAR},
            </if>
            <if test="mid != null">
                #{mid,jdbcType=INTEGER},
            </if>
            <if test="sortcode != null">
                #{sortcode,jdbcType=INTEGER},
            </if>
            <if test="state != null">
                #{state,jdbcType=INTEGER},
            </if>
            <if test="target != null">
                #{target,jdbcType=VARCHAR},
            </if>
            <if test="ico != null">
                #{ico,jdbcType=VARCHAR},
            </if>
            <if test="levelnum != null">
                #{levelnum,jdbcType=INTEGER},
            </if>
            <if test="sfhxyw != null">
                #{sfhxyw,jdbcType=INTEGER},
            </if>
            <if test="menuType != null">
                #{menu_type,jdbcType=INTEGER},
            </if>
            <if test="sfsqcb != null">
                #{sfsqcb,jdbcType=INTEGER},
            </if>
            <if test="sfxzjy != null">
                #{sfxzjy,jdbcType=INTEGER},
            </if>
            <if test="qxid != null">
                #{qxid,jdbcType=INTEGER},
            </if>
            <if test="type != null">
                #{type,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>

    <select id="selectByUserName" resultType="com.scxd.beans.pojo.SysMenu">

 SELECT DISTINCT A.MENU_ID,
             A.PARENTID,
             A.NAVIGATEURL,
             A.NAME,
             A.MID,
             A.SORTCODE,
             A.ICO,
             A.TARGET,
             A.LEVELNUM,
             A.QXID
             FROM SYS_MENU A, SYS_MENU_ROLE B, SYS_USER_ROLE C, SYS_USER D
             WHERE A.MENU_ID = B.MENU_ID
             AND B.ROLE_ID = C.ROLE_ID
             AND C.USER_ID = D.USER_ID
             AND A.STATE = 1
             AND D.ZT = 1
             AND D.LOGINNAME =#{0}
             ORDER BY A.SORTCODE ASC
  </select>
    <select id="selectAdminMenu" resultType="com.scxd.beans.pojo.SysMenu">
SELECT A.MENU_ID,
                   A.PARENTID,
                   A.NAVIGATEURL,
                   A.NAME,
                   A.MID,
                   A.SORTCODE,
                   A.ICO,
                   A.TARGET,
                   A.LEVELNUM
              FROM SYS_MENU A

             WHERE A.STATE = 1
             ORDER BY A.SORTCODE ASC
  </select>
    <select id="getMenusList" resultType="com.scxd.beans.pojo.SysMenu">
     SELECT * FROM sys_menu WHERE state = 1;
 </select>
    <select id="selectAllMenu" resultMap="BaseResultMap">
 SELECT A.MENU_ID,
                   A.PARENTID,
                   A.NAVIGATEURL,
                   A.NAME,
                   A.MID,
                   A.SORTCODE,
                   A.ICO,
                   A.TARGET,
                   A.LEVELNUM,
                   A.SFHXYW,
                   A.MENU_TYPE,
                   A.SFSQCB,
                   A.SFXZJY,
                   A.TYPE
              FROM SYS_MENU A
             ORDER BY A.SORTCODE ASC
 </select>
    <select id="getMenuQX"
            parameterType="java.lang.Integer" resultType="com.scxd.beans.pojo.SysMenuDetail">
   select rownum rn, A.* ,b.name menu_name,c.dmmc qx_name  from sys_menu_detail A left join sys_menu B on a.menu_id=b.menu_id
 left join (select * from biz_code_info where dmlb=1038) C on    c.dmz=a.qxid
    WHERE a.MENU_ID = #{ID}
</select>
</mapper>